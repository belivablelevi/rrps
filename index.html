<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Reverse RPS Incremental</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Inter',sans-serif;
  background:radial-gradient(circle at top,#020617,#000);
  color:#fff;min-height:100vh
}
#moneyDisplay{
  position:fixed;top:16px;right:16px;
  background:linear-gradient(135deg,#10b981,#22c55e);
  padding:14px 26px;border-radius:999px;
  font-weight:900;font-size:20px;color:#022c22
}
.container{
  max-width:900px;margin:120px auto;
  background:#020617cc;padding:36px;
  border-radius:30px;text-align:center
}
.choice{font-size:96px;margin:20px 0}
.buttons{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}
.buttons button{
  padding:18px 22px;font-size:18px;
  font-weight:800;border:none;border-radius:20px;
  background:#22c55e;color:#fff;cursor:pointer
}
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:18px;margin:32px 0
}
.stat{
  background:#020617;border:1px solid #1e293b;
  padding:18px;border-radius:20px
}
.fixed{
  position:fixed;bottom:20px;
  padding:14px 24px;border:none;
  border-radius:999px;font-weight:800;
  cursor:pointer;color:white
}
#settingsBtn{left:20px;background:#3b82f6}
#techBtn{right:160px;background:#8b5cf6}
#statsBtn{right:20px;background:#0ea5e9}
.modal{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.85);
  justify-content:center;padding:50px 20px
}
.modal-box{
  background:#020617;padding:28px;
  border-radius:24px;width:90%;
  max-width:820px
}
.close{
  width:100%;padding:14px;margin-top:20px;
  border-radius:14px;border:none;
  font-weight:800;background:#ef4444;
  color:white;cursor:pointer
}
.building{
  background:#0f172a;border:2px solid #1e293b;
  padding:16px;border-radius:16px;
  display:flex;cursor:pointer
}
.building.disabled{opacity:.4;cursor:not-allowed}
.building-icon{font-size:40px;margin-right:16px}
</style>
</head>

<body>

<div id="moneyDisplay">$0</div>

<div class="container">
  <h1>Reverse Rock Paper Scissors</h1>
  <div id="computerChoice" class="choice">?</div>

  <div class="buttons">
    <button onclick="guess('rock')">‚úä Rock</button>
    <button onclick="guess('paper')">‚úã Paper</button>
    <button onclick="guess('scissors')">‚úåÔ∏è Scissors</button>
  </div>

  <div class="stats">
    <div class="stat">STREAK<br><b id="streak">0</b></div>
    <div class="stat">MULT<br><b id="mult">x1</b></div>
    <div class="stat">CASHOUT<br><b id="cash">$0</b></div>
    <div class="stat">P/S<br><b id="pps">0</b></div>
    <div class="stat">LUCK<br><b id="luck">0%</b></div>
  </div>

  <button onclick="cashOut()">üí∞ Cash Out</button>
</div>

<button id="settingsBtn" class="fixed" onclick="openModal('settings')">Rebirth</button>
<button id="techBtn" class="fixed" onclick="openModal('tech')">Tech</button>
<button id="statsBtn" class="fixed" onclick="openModal('stats')">Stats</button>

<div id="settings" class="modal">
  <div class="modal-box">
    <h2>Rebirth</h2>
    <p>Coming soon.</p>
    <button class="close" onclick="closeModal('settings')">Close</button>
  </div>
</div>

<div id="tech" class="modal">
  <div class="modal-box">
    <h2>Buildings</h2>
    <div id="buildingsContainer"></div>
    <button class="close" onclick="closeModal('tech')">Close</button>
  </div>
</div>

<div id="stats" class="modal">
  <div class="modal-box">
    <div id="statsContent"></div>
    <button class="close" onclick="closeModal('stats')">Close</button>
  </div>
</div>

<script>
/* ===== DATA ===== */
const choices = ['rock','paper','scissors'];

let money = +localStorage.getItem('money') || 0;
let streak = +localStorage.getItem('streak') || 0;
let owned = JSON.parse(localStorage.getItem('owned')) || { bot:0 };
let stats = JSON.parse(localStorage.getItem('stats')) || { best:0, earned:0, clicks:0 };

/* ===== MECHANICS ===== */
function multiplier(){
  return 1 + Math.pow(streak,1.35)/12;
}
function payout(){
  return Math.floor(streak * 20 * multiplier());
}
function luck(){
  return Math.min(owned.bot * 2, 40);
}
function playsPerSecond(){
  return owned.bot;
}

/* ===== GAME LOGIC ===== */
function reverseWin(player, comp){
  return (
    (player==='rock' && comp==='paper') ||
    (player==='paper' && comp==='scissors') ||
    (player==='scissors' && comp==='rock')
  );
}

function process(player){
  let comp = choices[Math.floor(Math.random()*3)];
  if(Math.random()*100 < luck()){
    comp = choices[(choices.indexOf(player)+1)%3];
  }
  if(reverseWin(player,comp)) streak++;
  else streak = 0;

  stats.best = Math.max(stats.best, streak);
  computerChoice.textContent = comp;
}

/* ===== PLAYER ===== */
function guess(choice){
  stats.clicks++;
  process(choice);
  update();
}

function cashOut(){
  if(streak < 1) return;
  let gain = payout();
  money += gain;
  stats.earned += gain;
  streak = 0;
  update();
}

/* ===== BUILDINGS ===== */
function renderBuildings(){
  buildingsContainer.innerHTML='';
  let cost = Math.floor(25 * Math.pow(1.15, owned.bot));
  let canBuy = money >= cost;

  let div = document.createElement('div');
  div.className = 'building'+(canBuy?'':' disabled');
  div.innerHTML = `
    <div class="building-icon">ü§ñ</div>
    <div>Practice Bot<br>Cost: $${cost}<br>Owned: ${owned.bot}</div>
  `;
  div.onclick = ()=>{
    if(!canBuy) return;
    money -= cost;
    owned.bot++;
    renderBuildings();
    update();
  };
  buildingsContainer.appendChild(div);
}

/* ===== UI ===== */
function update(){
  streakEl.textContent = streak;
  multEl.textContent = 'x'+multiplier().toFixed(2);
  cashEl.textContent = '$'+payout();
  ppsEl.textContent = playsPerSecond();
  luckEl.textContent = luck()+'%';
  moneyDisplay.textContent = '$'+money;

  localStorage.setItem('money', money);
  localStorage.setItem('streak', streak);
  localStorage.setItem('owned', JSON.stringify(owned));
  localStorage.setItem('stats', JSON.stringify(stats));
}

function openModal(id){
  document.getElementById(id).style.display='flex';
  if(id==='tech') renderBuildings();
  if(id==='stats'){
    statsContent.innerHTML =
      `Best Streak: ${stats.best}<br>Total Earned: $${stats.earned}`;
  }
}
function closeModal(id){
  document.getElementById(id).style.display='none';
}

/* ===== BOT LOOP ===== */
setInterval(()=>{
  for(let i=0;i<playsPerSecond();i++){
    process(choices[Math.floor(Math.random()*3)]);
    if(streak > 10) cashOut();
  }
  update();
},1000);

/* ===== INIT ===== */
const streakEl = document.getElementById('streak');
const multEl = document.getElementById('mult');
const cashEl = document.getElementById('cash');
const ppsEl = document.getElementById('pps');
const luckEl = document.getElementById('luck');
const money
